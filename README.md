# Synergy ID Repository

A modern web application to manage and browse ID profiles for staff, students, and parents, powered by React, Vercel, Supabase, and the Gemini API.

## Features

-   **Categorized Profiles**: Create and manage profiles for Staff, Students, and Parents.
-   **Dynamic Bio Generation**: Uses the Gemini API to automatically generate a professional bio for each new profile.
-   **Profile Associations**: Link students to their guardians (existing or newly created).
-   **Sibling Link**: Easily associate guardians from a known sibling to a new student.
-   **Persistent Storage**: Data is stored securely in a Supabase database.
-   **Modern UI**: A clean, responsive interface built with React and Tailwind CSS.

## Tech Stack

-   **Frontend**: React, Vite, Tailwind CSS
-   **Backend**: Hono on Vercel Serverless Functions
-   **Database**: Supabase (Postgres)
-   **AI**: Google Gemini API

---

## Local Development Setup

Follow these steps to get the project running on your local machine.

### 1. Prerequisites

-   Node.js (v18 or later)
-   `npm` or `yarn` for package management
-   A Supabase account with a project created.
-   A Google Gemini API Key.

### 2. Installation

1.  **Clone the repository:**
    ```bash
    git clone <your-repository-url>
    cd synergy-id-repository
    ```

2.  **Install dependencies:**
    ```bash
    npm install
    ```

### 3. Environment Variables

1.  **Create an environment file:**
    Duplicate the `.env.example` file and rename it to `.env`.

    ```bash
    cp .env.example .env
    ```

2.  **Fill in the variables:**
    Open the `.env` file and add your credentials. You can find the Supabase details in your project's dashboard under `Settings -> API`.

    ```ini
    # Supabase connection details
    SUPABASE_URL="your_supabase_project_url"
    SUPABASE_ANON_KEY="your_supabase_public_anon_key"
    SUPABASE_SERVICE_KEY="your_supabase_service_role_key" # Used for the db:setup script

    # Google Gemini API Key (get from Google AI Studio)
    API_KEY_ALIAS_FOR_GEMINI="your_gemini_api_key"
    ```

### 4. Database Setup

1.  **Create the `people` table:**
    -   Navigate to your Supabase project dashboard.
    -   Go to the `SQL Editor` and click `+ New query`.
    -   Paste the following SQL and click `RUN` to create the table.

    ```sql
    CREATE TABLE public.people (
      id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
      category VARCHAR(20) NOT NULL,
      "firstName" VARCHAR(50) NOT NULL,
      "lastName" VARCHAR(50) NOT NULL,
      image TEXT NOT NULL,
      role VARCHAR(50),
      class VARCHAR(50),
      "guardianIds" BIGINT[],
      bio TEXT NOT NULL,
      "googleSheetId" VARCHAR(20) NOT NULL,
      "createdAt" TIMESTAMPTZ DEFAULT NOW() NOT NULL
    );
    ```

2.  **Seed the database:**
    Run the setup script to seed your new table with initial data. This script uses the `SUPABASE_SERVICE_KEY` from your `.env` file.

    ```bash
    npm run db:setup
    ```

### 5. Running the Development Server

Start the Vite development server. This will proxy any requests to `/api/*` to your serverless function running locally.

```bash
npm run dev
```

The application should now be running at `http://localhost:5173`.

---

## Deployment to Vercel

This project is configured for seamless deployment to Vercel.

1.  **Push to a Git Repository:**
    Ensure your project is pushed to a GitHub, GitLab, or Bitbucket repository.

2.  **Import Project on Vercel:**
    -   Log in to your Vercel dashboard.
    -   Click "Add New..." -> "Project".
    -   Import the Git repository you just pushed.

3.  **Configure Environment Variables:**
    -   During the import process, Vercel will prompt you to add Environment Variables.
    -   Copy the keys and values from your local `.env` file (`SUPABASE_URL`, `SUPABASE_ANON_KEY`, and `API_KEY_ALIAS_FOR_GEMINI`). **Do not** expose your `SUPABASE_SERVICE_KEY` on the frontend; it is only needed for the setup script.
    -   Click "Deploy".

Vercel will automatically build your frontend, deploy your API functions, and provide you with a live URL.